{"ast":null,"code":"var _jsxFileName = \"/home/iassure/Ref Clone/iAssureIT Website/iAssureITReactCMS/webapp/admin/src/CMS/component/createnewpage/Viewpage.js\";\nimport React, { Component, Suspense } from 'react';\nimport CircleMenuBars from '../circlemenubars.js';\nimport axios from 'axios';\nimport { Route, withRouter } from 'react-router-dom';\nimport CmsBlock from \"../createnewblock/Cmsblock.js\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/js/modal.js';\nimport 'bootstrap/js/collapse.js';\nimport swal from 'sweetalert';\nimport './viewpage.css';\n\nclass Viewpage extends React.Component {\n  constructor(props) {\n    super(props);\n    var id = this.props.match.params.url;\n    this.state = {\n      Newpagecomponent: \"\",\n      urlId: id,\n      blocks: \"\",\n      Blocks: [],\n      ListOfBlocks: \"\",\n      addedBlocks: [],\n      listOfBlocks: false,\n      urlParam: \"\",\n      block_id: \"\",\n      pageData: \"\",\n      ListOfPages: \"\"\n      /* \"blockGroup\": null,\n        \"blockAppearOnPage\": null*/\n\n    };\n  }\n\n  getAllBlockList() {\n    axios.get('/api/blocks/get/list').then(response => {\n      console.log(\"AllBlogs=\", response.data);\n      this.setState({\n        ListOfBlocks: response.data\n      }, () => {\n        console.log(\"===================result==\", this.state.ListOfBlocks);\n      });\n    }).catch(function (error) {\n      // handle error\n      console.log(error);\n    });\n  }\n\n  getListOfPages() {\n    /*/get/list*/\n    axios.get('/api/pages/get/list').then(response => {\n      this.setState({\n        ListOfPages: response.data\n      });\n    }).catch(function (error) {\n      // handle error\n      console.log(error);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {}\n\n  pageAddBlock() {\n    var pageUrl = window.location.pathname; // console.log(\"pageUrl = \",pageUrl);\n\n    let a = pageUrl ? pageUrl.split('/') : \"\"; // console.log(\"a==>\",a[1]); \n\n    const urlParam = a[3];\n    this.setState({\n      urlParam: urlParam\n    });\n    axios.get('/api/pages/get/page_block/' + urlParam).then(response => {\n      console.log(\"data in page=\", response.data);\n\n      if (response.data) {\n        this.setState({\n          pageData: response.data\n        });\n        /*var blockFromPage = response.data.pageBlocks;\n        // console.log(\"Page = \",response.data);\n        for (var i = 0; i < blockFromPage.length; i++) \n        {\n        \t{\n        \t axios\n             .get('http://iogapi.iassureit.com/api/blocks/get/'+ blockFromPage[i].block_id)\n             .then((response)=>{\n              var blocks = this.state.Blocks;\n              blocks.push(response.data);\n            \tthis.setState({\n           \t\t\tBlocks:blocks\n           \t\t});\n           \t})\n           \t.catch(function(error){\n             \tconsole.log(error);\n               \tif(error.message === \"Request failed with status code 401\")\n                 \t\t{\n                      \t\tswal(\"Your session is expired! Please login again.\",\"\", \"error\");\n                 \t\t}\n        \t\t\t})\n        \t}\n        }*/\n      }\n    }).catch(function (error) {\n      console.log(error);\n\n      if (error.message === \"Request failed with status code 401\") {\n        swal(\"Your session is expired! Please login again.\", \"\", \"error\");\n      }\n    });\n  }\n\n  componentDidMount() {\n    // console.log(\"pageUrl = \",pageUrl);\n    this.getListOfPages();\n    this.getAllBlockList();\n    this.pageAddBlock();\n    var pageUrl = window.location.pathname; // console.log(\"pageUrl = \",pageUrl);\n\n    let a = pageUrl ? pageUrl.split('/') : \"\"; // console.log(\"a==>\",a[1]); \n\n    const urlParam = a[3];\n    this.setState({\n      urlParam: urlParam\n    });\n  }\n\n  handleChange(event) {\n    var attaribute_Value = event.target.getAttribute('data_id'); // console.log(\"attaribute_Value\",attaribute_Value);\n\n    this.state.addedBlocks.push(attaribute_Value);\n  }\n\n  addBlock(event) {\n    // var urlParam = window.location.pathname;\n    //      console.log('urlParam=>',urlParam);\n    var pageUrl = window.location.pathname;\n    ;\n    console.log(\"pageUrl = \", pageUrl);\n    let a = pageUrl ? pageUrl.split('/') : \"\";\n    const urlParam = a[3];\n    console.log(\"urlParam = \", urlParam);\n    var attaribute_addBlock = event.target.id; // console.log(\"attaribute_addBlock = \",attaribute_addBlock);\n\n    var AttachmentValues = {\n      \"block_id\": attaribute_addBlock\n    };\n    axios.patch('api/pages/patch/blocks/add/' + urlParam, AttachmentValues).then(response => {\n      // window.location.reload();\n      this.getAllBlockList();\n      this.pageAddBlock();\n      swal(\"Block added in your page\");\n      console.log(response);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  submitData(event) {\n    var AttachmentValues = this.state.addedBlocks; // console.log(\"ids =\",this.state.addedBlocks);\n\n    axios.post('/api/pages/patch/blocks/add/' + this.state.urlParam, AttachmentValues).then(function (response) {\n      console.log(response);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  editBlock(event) {\n    var block_id = event.currentTarget.id; // console.log(\"block_id=\",block_id);\n\n    this.setState({\n      block_id: block_id\n    });\n  }\n\n  deleteBlocks(event) {\n    let urlParam = this.state.urlParam; // console.log(\"this.state.urlParam  \",urlParam);\n\n    event.preventDefault();\n    var URL = event.target.id; // console.log(\"delet id \",URL);\n\n    var deleteValues = {\n      \"pageBlocks_id\": URL\n    };\n    console.log(\"id delet\", this.state.urlParam, deleteValues);\n    swal({\n      title: \"Are you sure you want to delete this block ?\",\n      buttons: true,\n      dangerMode: true\n    }).then(success => {\n      // console.log(success);\n      if (success) {\n        axios.patch('/api/pages/patch/blocks/remove/' + this.state.urlParam, deleteValues).then(response => {\n          // this.getListOfPages();\n          swal(\"block is deleted!\");\n          this.getAllBlockList();\n          this.pageAddBlock();\n        }).catch(error => {\n          console.log(\"error = \", error);\n        });\n      } else {\n        swal(\"Your Block is safe!\");\n      }\n    });\n  }\n\n  onclickEvent() {\n    this.setState({\n      listOfBlocks: true\n    });\n  }\n\n  render() {\n    // var data = this.state.ListOfBlocks;\n    console.log(\"block id in render=\", this.state.pageData);\n    const listBlock = this.state.pageData.pageBlocks; // console.log(\"ListOfPages==>\",this.state.ListOfPages);\n    // console.log(\"data blocks in render\",data);\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"  \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(CircleMenuBars, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 nopadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" col-lg-12 col-md-12 col-sm-12 col-xs-12 nopadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"BoxLaoutAddblock1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, this.state.pageData.pageBlocks && this.state.pageData.pageBlocks.length > 0 ? this.state.pageData.pageBlocks.map((result, index) => {\n      var componentTemp = result.block_id.blockComponentName ? result.block_id.blockComponentName : 'Typecomponent1';\n      const NewPageComponent = React.lazy(() => import('../blockTemplate/' + componentTemp + '/' + componentTemp + '.js'));\n      console.log(\"componentTemp=======in viewpage=\", componentTemp); //const NewPageComponent = loadable(() => import('../blockTemplate/'+componentTemp));\n\n      var Block_id = result.block_id._id;\n      var block_id = result._id; // console.log(\"componentTemp\",componentTemp);\n\n      return React.createElement(Suspense, {\n        fallback: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, \"Loading...\"),\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-trash deletbtnIcon pull-right\",\n        id: block_id,\n        onClick: this.deleteBlocks.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"fa fa-pencil editIcon pull-right\",\n        id: Block_id,\n        onClick: this.editBlock.bind(this),\n        \"data-toggle\": \"modal\",\n        \"data-target\": \"#editBlockFormM\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }), React.createElement(NewPageComponent, {\n        block_id: Block_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }));\n    }) : null, React.createElement(\"button\", {\n      type: \"button\",\n      className: \" col-lg-4 col-lg-offset-4 b1 success btn-lg\",\n      onClick: () => this.onclickEvent(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, this.state.pageData && this.state.pageData.pageBlocks.length > 0 ? \"Add Another Block\" : \" Add New Block\"), this.state.listOfBlocks === true ? React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"noPadLR  selectBox col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 noPadLR\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel panel-default bgcolorO\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel-heading bgPanelHead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"panel-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"cloneBtn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/cms-pages/cms-page-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, \"Back\")), React.createElement(\"button\", {\n      className: \"cloneBtn btn-primary pull-right\",\n      id: \"cnBlock\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"pull-right\",\n      \"data-toggle\": \"collapse\",\n      \"data-parent\": \"#accordion\",\n      href: \"#collapse1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, \"+ Create New Block\")))), React.createElement(\"div\", {\n      id: \"collapse1\",\n      className: \"panel-collapse collapse\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(CmsBlock, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }))))), this.state.ListOfBlocks && this.state.ListOfBlocks.length > 0 ? this.state.ListOfBlocks.map((result, index) => {\n      // console.log(\"========result in viewpage 2=============\",result);\n\n      /*\tvar component = result.blockComponentName ? result.blockComponentName : 'Block1Sample';\n      \tconst NewPageComponent = React.lazy(() => import('../blockComponent/'+component+'.js'));*/\n      var component = result.blockComponentName ? result.blockComponentName : 'Typecomponent1';\n      const NewPageComponent = React.lazy(() => import('../blockTemplate/' + component + '/' + component + '.js'));\n      var block_id = result._id; // console.log(\"block_id\",block_id);\n\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottomBorder2px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"col-lg-2 col-md-3 col-sm-6 col-xs-12 btn btn-primary pull-right AddBlockbtn\",\n        onClick: this.addBlock.bind(this),\n        id: block_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, \"Add this block\"), React.createElement(\"div\", {\n        className: \"checkbox ml15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"fs15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        className: \"pull-right\",\n        onChange: this.handleChange.bind(this),\n        data_id: block_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }), \" Select Multiple Blocks\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"compBorderPadd5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(Suspense, {\n        fallback: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 362\n          },\n          __self: this\n        }, \"Loading...\"),\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, React.createElement(NewPageComponent, {\n        block_id: block_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }))));\n    }) : null, React.createElement(\"div\", {\n      className: \"savetemp col-lg-12 col-md-12 col-sm-12 col-xs-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"col-lg-3 col-md-3 col-sm-6 col-xs-12 btn btn-primary pull-right sendtxtmsgbtn AddBlockbtn\",\n      onClick: () => this.submitData(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, \"Add Multiple Blocks\"))))) : null)))), React.createElement(\"div\", {\n      id: \"editBlockFormM\",\n      className: \"modal\",\n      role: \"dialog\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-dialog modal-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }, \"\\xD7\"), React.createElement(\"h4\", {\n      className: \"modal-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }, \"Edit Block\")), React.createElement(\"div\", {\n      className: \"modal-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, React.createElement(CmsBlock, {\n      block_id: this.state.block_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-default\",\n      \"data-dismiss\": \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    }, \"Close\"))))));\n  }\n\n}\n\nexport default withRouter(Viewpage);","map":{"version":3,"sources":["/home/iassure/Ref Clone/iAssureIT Website/iAssureITReactCMS/webapp/admin/src/CMS/component/createnewpage/Viewpage.js"],"names":["React","Component","Suspense","CircleMenuBars","axios","Route","withRouter","CmsBlock","swal","Viewpage","constructor","props","id","match","params","url","state","Newpagecomponent","urlId","blocks","Blocks","ListOfBlocks","addedBlocks","listOfBlocks","urlParam","block_id","pageData","ListOfPages","getAllBlockList","get","then","response","console","log","data","setState","catch","error","getListOfPages","componentWillReceiveProps","nextProps","pageAddBlock","pageUrl","window","location","pathname","a","split","message","componentDidMount","handleChange","event","attaribute_Value","target","getAttribute","push","addBlock","attaribute_addBlock","AttachmentValues","patch","submitData","post","editBlock","currentTarget","deleteBlocks","preventDefault","URL","deleteValues","title","buttons","dangerMode","success","onclickEvent","render","listBlock","pageBlocks","length","map","result","index","componentTemp","blockComponentName","NewPageComponent","lazy","Block_id","_id","bind","component"],"mappings":"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","sourcesContent":["import React, { Component, Suspense } from 'react';\nimport CircleMenuBars from '../circlemenubars.js';\nimport axios from 'axios';\nimport {Route, withRouter} from 'react-router-dom';\nimport CmsBlock from \"../createnewblock/Cmsblock.js\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/js/modal.js';\nimport 'bootstrap/js/collapse.js';\nimport swal from 'sweetalert';\nimport './viewpage.css';\n\nclass Viewpage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n   \t\tvar id = this.props.match.params.url;\n\t\tthis.state = {\n\t\t\tNewpagecomponent: \"\",\n\t\t\turlId:id,\n\t   \t\tblocks:\"\",\n\t   \t\tBlocks:[],\n\t   \t\tListOfBlocks:\"\",\n\t        addedBlocks:[],\n\t   \t\tlistOfBlocks:false,\n\t   \t\turlParam:\"\",\n\t   \t\tblock_id:\"\",\n\t   \t\tpageData\t:\"\",\n\t   \t\tListOfPages :\"\"\n\n\t   \t\t/* \"blockGroup\": null,\n        \"blockAppearOnPage\": null*/\n\t\t}\n\t}\n\t\n\tgetAllBlockList(){\n\t\taxios\n\t\t\t\t.get('/api/blocks/get/list')\n\t\t\t\t.then((response)=>{\n\t\t\t\t\t\t        console.log(\"AllBlogs=\",response.data);\n\t\t\t\t\t\t      \tthis.setState({\n\t\t\t\t\t      \t\t\tListOfBlocks:response.data\n\t\t\t\t\t      \t\t},()=>{\n\t\t\t\t\t      \t\t\t\tconsole.log(\"===================result==\",this.state.ListOfBlocks);\n\t\t\t\t\t      \t\t});\n\t\t\t\t\t      \t})\n\t\t\t  \t.catch(function (error) {\n\t\t\t    // handle error\n\t\t\t    \tconsole.log(error);\n\t\t\t  \t});\n\t}\n\n\tgetListOfPages(){\n\t/*/get/list*/\n\taxios\n\t\t\t.get('/api/pages/get/list')\n\t\t\t.then((response)=>{        \n\t\t\t      \tthis.setState({\n\t\t      \t\t\tListOfPages:response.data\n\t\t      \t\t});\n\t\t\t\t})\n\t\t  \t.catch(function (error) {\n\t\t    // handle error\n\t\t    \tconsole.log(error);\n\t\t  \t});\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\n\t\n\t}\n\tpageAddBlock(){\n\t\tvar pageUrl = window.location.pathname;\n\t\t\t// console.log(\"pageUrl = \",pageUrl);\n\t\t\tlet a = pageUrl ? pageUrl.split('/') : \"\";\n\t        // console.log(\"a==>\",a[1]); \n\t        const urlParam =a[3];\n\t        this.setState({\n\t\t\t      \t\t\turlParam:urlParam\n\t\t\t      \t\t});\n\n\t\t\taxios\n\t\t\t.get('/api/pages/get/page_block/'+urlParam)\n\t        .then((response)=>{\n\t        \tconsole.log(\"data in page=\",response.data);\n\t      \t\tif (response.data) {\n\t\t\t      \tthis.setState({\n\t\t\t      \t\tpageData:response.data,\n\t\t\t      \t});\n\n    \t\t\t/*var blockFromPage = response.data.pageBlocks;\n\t\t    \t// console.log(\"Page = \",response.data);\n\t\t\t    for (var i = 0; i < blockFromPage.length; i++) \n\t\t\t    {\n\t\t\t    \t{\n\t\t\t   \t\t axios\n\t\t\t\t        .get('http://iogapi.iassureit.com/api/blocks/get/'+ blockFromPage[i].block_id)\n\t\t\t\t        .then((response)=>{\n\t\t\t\t\t        var blocks = this.state.Blocks;\n\t\t\t\t\t        blocks.push(response.data);\n\t\t\t\t\t      \tthis.setState({\n\t\t\t\t      \t\t\tBlocks:blocks\n\t\t\t\t      \t\t});\n\t\t\t\t      \t})\n\t\t\t\t      \t.catch(function(error){\n\t\t\t\t        \tconsole.log(error);\n\t\t\t\t          \tif(error.message === \"Request failed with status code 401\")\n\t\t              \t\t{\n\t\t                   \t\tswal(\"Your session is expired! Please login again.\",\"\", \"error\");\n\t\t              \t\t}\n\t\t     \t\t\t})\n\t    \t\t\t}\n\t \t\t\t}*/\n\t\t\t\t\t}\n\t\t\t    })\n\t\t\t    .catch(function(error){\n\t\t\t        console.log(error);\n\t\t\t          if(error.message === \"Request failed with status code 401\")\n\t\t\t              {\n\t\t\t                   swal(\"Your session is expired! Please login again.\",\"\", \"error\");\n\t\t\t              }\n\t\t\t      })\n\n\t}\n  \n\tcomponentDidMount(){\n\t\t\t// console.log(\"pageUrl = \",pageUrl);\n\t\t\t\n\t\t\tthis.getListOfPages();\n\t\t\tthis.getAllBlockList();\n\t\t\tthis.pageAddBlock();\n\t\t\tvar pageUrl = window.location.pathname;\n\t\t\t// console.log(\"pageUrl = \",pageUrl);\n\t\t\tlet a = pageUrl ? pageUrl.split('/') : \"\";\n\t        // console.log(\"a==>\",a[1]); \n\t        const urlParam =a[3];\n\t        this.setState({\n\t\t\t      \t\t\turlParam:urlParam\n\t\t\t      \t\t});\n\n\t\t\n   \t}\n   \thandleChange(event){\n\t\tvar attaribute_Value = event.target.getAttribute('data_id');\n\t\t// console.log(\"attaribute_Value\",attaribute_Value);\n\t\tthis.state.addedBlocks.push(attaribute_Value)\n\t}\n\n\n\taddBlock(event){\n\t\t// var urlParam = window.location.pathname;\n        //      console.log('urlParam=>',urlParam);\n\t\tvar pageUrl = window.location.pathname;;\n\t\tconsole.log(\"pageUrl = \",pageUrl);\n\t\tlet a = pageUrl ? pageUrl.split('/') : \"\";\n        const urlParam =a[3];\n\t\tconsole.log(\"urlParam = \",urlParam);\n\n\t\tvar attaribute_addBlock = event.target.id;\n\t\t// console.log(\"attaribute_addBlock = \",attaribute_addBlock);\n\t\t\n\n\t\tvar AttachmentValues ={    \n\t\t\t\"block_id\"\t: attaribute_addBlock,\t\t\t\t\t\t\t\t\t\t\t\n   \t\t}\n\t\taxios\n\t\t\t.patch('api/pages/patch/blocks/add/'+urlParam,AttachmentValues)\n\t\t  \t.then( (response)=> {\n\t\t    \t// window.location.reload();\n\t\t    \tthis.getAllBlockList();\n\t\t\t\tthis.pageAddBlock();\n\t            swal(\"Block added in your page\");\n\n\t\t    \tconsole.log(response);\n\t\t  \t})\n\t\t  \t.catch(function (error) {\n\t\t    \tconsole.log(error);\n\t\t  \t});\n\n\t}\n\n\tsubmitData(event){\n\t\tvar AttachmentValues =this.state.addedBlocks;\n\t\t// console.log(\"ids =\",this.state.addedBlocks);\n\t\taxios\n\t\t\t.post('/api/pages/patch/blocks/add/'+this.state.urlParam,AttachmentValues)\n\t\t  \t.then(function (response) {\n\t\t    \tconsole.log(response);\n\t\t  \t})\n\t\t  \t.catch(function (error) {\n\t\t    \tconsole.log(error);\n\t\t  \t});\n\t}\n\n\teditBlock(event){\n\t\tvar block_id = event.currentTarget.id;\n\t\t// console.log(\"block_id=\",block_id);\n\t\tthis.setState({block_id: block_id});\n\t}\n\n\tdeleteBlocks(event){\n\t\tlet urlParam=this.state.urlParam;\n\t\t// console.log(\"this.state.urlParam  \",urlParam);\n\t\tevent.preventDefault();\n\t\tvar URL= event.target.id;\n\t\t// console.log(\"delet id \",URL);\n\t\tvar deleteValues ={\n\t      \"pageBlocks_id\":URL\n\t\t\t}\n\t\tconsole.log(\"id delet\", this.state.urlParam, deleteValues);\n\t\t swal({\n\t          title: \"Are you sure you want to delete this block ?\",\n\t         \n\t          buttons: true,\n\t          dangerMode: true,\n\t        })\n\t        .then((success) => {\n\t        \t// console.log(success);\n\t            if (success) {\n\t            \taxios\n\t\t\t\t    .patch('/api/pages/patch/blocks/remove/'+this.state.urlParam,deleteValues)\n\t\t\t\t    .then((response)=>{\n\t\t\t\t     \t// this.getListOfPages();\n\t\t\t\t       swal(\"block is deleted!\");\n\t\t\t\t       this.getAllBlockList();\n\t\t\t\t\t\tthis.pageAddBlock();\n\t\t\t\t       \n\t\t\t\t    })\n\t\t\t\t    .catch((error)=>{\n\t\t\t\t       console.log(\"error = \", error);              \n\t\t\t\t    });  \n\t            } else {\n\t            swal(\"Your Block is safe!\");\n\t          }\n\t        }); \n\t}\n\tonclickEvent(){\n\t\tthis.setState({\n\t      \t\t\tlistOfBlocks:true\n\t      \t\t});\n\t\t}\n\n   render() {\n    \t// var data = this.state.ListOfBlocks;\n    \tconsole.log(\"block id in render=\",this.state.pageData);\n    \tconst listBlock = this.state.pageData.pageBlocks;\n    \t// console.log(\"ListOfPages==>\",this.state.ListOfPages);\n    \t// console.log(\"data blocks in render\",data);\n        return (\n        \t\t<div>\t\n\t\t\t\t\t<div className=\"  \">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<CircleMenuBars />\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 nopadding\">\n\t\t\t\t\t\t\t<div className=\" col-lg-12 col-md-12 col-sm-12 col-xs-12 nopadding\">\n\n\t\t\t\t\t\t\t\t<div className=\"BoxLaoutAddblock1\">\n\t\t\t\t\t\t\t\t\t{/*<Cmspage id={this.state.urlId}/>*/}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.state.pageData.pageBlocks && this.state.pageData.pageBlocks.length>0?\n\t\t\t\t\t\t\t\t\t\t\tthis.state.pageData.pageBlocks.map((result, index)=>{\n\n\t\t\t\t\t\t\t\t\t\t\tvar componentTemp = result.block_id.blockComponentName ? result.block_id.blockComponentName : 'Typecomponent1';\n\t\t\t\t\t\t\t\t\t\t\tconst NewPageComponent = React.lazy(() => import('../blockTemplate/'+componentTemp+'/'+componentTemp+'.js'));\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"componentTemp=======in viewpage=\",componentTemp);\n\n\n\t\t\t\t\t\t\t\t\t\t\t\t//const NewPageComponent = loadable(() => import('../blockTemplate/'+componentTemp));\n\t\t\t\t\t\t\t\t\t\t\t\tvar Block_id=result.block_id._id;\n\t\t\t\t\t\t\t\t\t\t\t\tvar block_id=result._id;\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(\"componentTemp\",componentTemp);\n\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Suspense fallback={<div>Loading...</div>} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"fa fa-trash deletbtnIcon pull-right\" id={block_id} onClick={this.deleteBlocks.bind(this)}></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"fa fa-pencil editIcon pull-right\" id={Block_id} onClick={this.editBlock.bind(this)} data-toggle=\"modal\" data-target=\"#editBlockFormM\"></i>\n\t\t\t\t\t\t\t\t\t\t\t    \t\t<NewPageComponent block_id={Block_id}/>\n\t\t\t\t\t\t\t\t\t\t\t    \t</Suspense>\n\t\t\t\t\t\t\t\t\t\t    \t);\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\" col-lg-4 col-lg-offset-4 b1 success btn-lg\" onClick={() => this.onclickEvent()}>\n\t\t\t\t\t\t\t\t\t\t { this.state.pageData && this.state.pageData.pageBlocks.length > 0 \n\t\t\t\t\t\t\t\t\t\t \t?\n\t\t\t\t\t\t\t\t\t\t \t\"Add Another Block\"\n\t\t\t\t\t\t\t\t\t\t \t: \" Add New Block\" }\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.state.listOfBlocks === true ?\n\t\t\t\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"noPadLR  selectBox col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 noPadLR\">\n\t\t\t\t\t\t                \t\t\t\t\t<div className=\"panel panel-default bgcolorO\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <div className=\"panel-heading bgPanelHead\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <h4 className=\"panel-title\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <button className=\"cloneBtn btn-primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         \t<a href=\"/cms-pages/cms-page-1\">Back</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <button className=\"cloneBtn btn-primary pull-right\" id=\"cnBlock\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <a className=\"pull-right\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapse1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        + Create New Block</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        </h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <div id=\"collapse1\" className=\"panel-collapse collapse\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t      \t<div className=\"panel-body\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t      \t\t<CmsBlock/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<div className=\"col-lg-12\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-6\">\n                                                \t\t\t\t<label htmlFor=\"email\">Block Type<span className=\"redFont\">*</span></label>\n\t\t\t\t\t\t\t\t\t                \t\t\t\t<select name=\"cars\" className=\"col-lg-12\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t<option>HomePage</option>\n                            \t\t\t  \t\t\t\t\t\t\t\t        <option>Blog</option>\n                            \t\t\t  \t\t\t\t\t\t\t\t        <option>About Us</option>\n                            \t\t\t  \t\t\t\t\t\t\t\t        <option>Services</option>\n                            \t\t\t  \t\t\t\t\t\t\t\t        <option>Contact Us</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-6\">\n                                                \t\t\t\t<label htmlFor=\"email\">Block On Page<span className=\"redFont\">*</span></label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select name=\"\" className=\"col-lg-12\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ this.state.ListOfPages ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.ListOfPages.map((result, index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t<option value=\"\" key={index}>{result.pageTitle}</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div> */ }\n\t\t\t\t\t\t                \t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t                \t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.ListOfBlocks && this.state.ListOfBlocks.length>0?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.ListOfBlocks.map((result, index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(\"========result in viewpage 2=============\",result);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/*\tvar component = result.blockComponentName ? result.blockComponentName : 'Block1Sample';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst NewPageComponent = React.lazy(() => import('../blockComponent/'+component+'.js'));*/\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar component = result.blockComponentName ? result.blockComponentName : 'Typecomponent1';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst NewPageComponent = React.lazy(() => import('../blockTemplate/'+component+'/'+component+'.js'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar block_id=result._id;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(\"block_id\",block_id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t                \t\t\t<div key={index} className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottomBorder2px\">\n\t\t\t\t\t\t\t\t                            \t\t\t\t\t<button  type=\"submit\" className=\"col-lg-2 col-md-3 col-sm-6 col-xs-12 btn btn-primary pull-right AddBlockbtn\" onClick={this.addBlock.bind(this)} id={block_id} >Add this block</button>\n\t\t\t\t\t\t\t\t\t\t\t\t                \t\t\t\t<div className=\"checkbox ml15\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <label className=\"fs15\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        \t<input type=\"checkbox\" className=\"pull-right\" onChange={this.handleChange.bind(this)} data_id={block_id}/> Select Multiple Blocks\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        </label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"compBorderPadd5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Suspense fallback={<div>Loading...</div>} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t<NewPageComponent block_id={block_id}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t</Suspense>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </div>\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"savetemp col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t\t\t                            <button  type=\"submit\" className=\"col-lg-3 col-md-3 col-sm-6 col-xs-12 btn btn-primary pull-right sendtxtmsgbtn AddBlockbtn\" onClick={() => this.submitData()} >Add Multiple Blocks</button>\n\t\t\t\t\t\t\t\t\t                        </div>\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t\t\t       \n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</section>\t\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/*<!-- Modal -->*/}\n\t\t\t\t\t<div id=\"editBlockFormM\" className=\"modal\" role=\"dialog\">\n\t\t\t\t\t \t<div className=\"modal-dialog modal-lg\">\n\t\t\t\t\t    {/*<!-- Modal content-->*/}\n\t\t\t\t\t    \t<div className=\"modal-content\">\n\t\t\t\t\t\t        <div className=\"modal-header\">\n\t\t\t\t\t\t\t        <button type=\"button\" className=\"close\" data-dismiss=\"modal\">&times;</button>\n\t\t\t\t\t\t\t        <h4 className=\"modal-title\">Edit Block</h4>\n\t\t\t\t\t\t      \t</div>\n\t\t\t\t\t\t     \t<div className=\"modal-body\">\n\t\t\t\t\t\t      \t\t{/*console.log(\"in modal\",this.state.block_id)*/}\n\t\t\t\t\t\t        \t<CmsBlock block_id={this.state.block_id}/>\n\t\t\t\t\t\t      \t</div>\n\t\t\t\t\t\t      \t<div className=\"modal-footer\">\n\t\t\t\t\t\t        \t<button type=\"button\" className=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n\t\t\t\t\t\t      \t</div>\n\t\t\t\t\t    \t</div>\n\t\t\t\t\t    </div>\n\t\t\t\t\t</div>\n\t\t\t\t</div> \n        );\n    }\n}\n\nexport default withRouter(Viewpage);"]},"metadata":{},"sourceType":"module"}