{"ast":null,"code":"var _jsxFileName = \"/home/iassure/Ref Clone/iAssureIT Website/iAssureITReactCMS/webapp/admin/src/CMS/component/JobApplication/AddFile.js\";\nimport React, { Component } from 'react'; // import $                      from 'jquery';\n\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport S3FileUpload from 'react-s3'; // import { deleteFile }         from 'react-s3';\n// import IAssureTable           from \"../../coreAdmin/IAssureTable/IAssureTable.jsx\";\n//import 'react-table/react-table.css';\n\nimport \"./AddFile.css\";\n\nclass AddFile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"config\": \"\",\n      \"author\": \"\",\n      \"caseStudy_Image\": \"\",\n      \"CheckFile\": false,\n      \"caseStudy_File\": \"\",\n      \"configData\": props && props.configData ? props.configData : {},\n      \"fileArray\": props && props.fileArray ? props.fileArray : [],\n      \"imageArray\": props && props.imageArray ? props.imageArray : [],\n      \"fileType\": props && props.fileType ? props.fileType : {},\n      \"action\": props && props.action ? props.action : \"\",\n      \"filenames\": [] // fileArray           : [],\n\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log('nextProps.imageArray', nextProps);\n\n    if (nextProps) {\n      this.setState({\n        \"imageArray\": nextProps.imageArray,\n        \"fileArray\": nextProps.fileArray\n      });\n    }\n  }\n\n  componentDidMount() {\n    var configData = this.props.configData;\n    var fileType = this.props.fileType;\n    this.setState({\n      fileType: fileType\n    }, () => {\n      console.log(\"fileType\", this.state.fileType);\n    });\n    axios // .get('http://cofficapi.iassureit.com/api/projectSettings/single/S3')\n    .get('/api/projectSettings/get/S3').then(response => {\n      // console.log(\"response\",response);\n      const config = {\n        bucketName: response.data.bucket,\n        dirName: \"iOG\",\n        region: response.data.region,\n        accessKeyId: response.data.key,\n        secretAccessKey: response.data.secret\n      };\n      this.setState({\n        config: config\n      }, () => {// console.log(\"config\",this.state.config)\n      });\n    }).catch(function (error) {\n      console.log(error);\n\n      if (error.message === \"Request failed with status code 401\") {\n        swal(\"Your session is expired! Please login again.\", \"\", \"error\");\n        this.props.history.push(\"/\");\n      }\n    });\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n  }\n\n  uploadImage(event) {\n    event.preventDefault();\n    let self = this;\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var file = event.currentTarget.files[0];\n      var newFileName = JSON.parse(JSON.stringify(new Date())) + \"_\" + file.name;\n      var newFile = new File([file], newFileName); // console.log(\"file\",newFile);\n\n      if (newFile) {\n        // console.log(\"config--------------->\",this.state.config);\n        var ext = newFile.name.split('.').pop();\n\n        if (ext === \"jpg\" || ext === \"png\" || ext === \"jpeg\" || ext === \"JPG\" || ext === \"PNG\" || ext === \"JPEG\") {\n          if (newFile) {\n            S3FileUpload.uploadFile(newFile, this.state.config).then(Data => {\n              var obj1 = {\n                imgPath: Data.location\n              };\n              var imageArray = this.state.imageArray;\n              imageArray.push(obj1);\n              this.setState({\n                imageArray: imageArray\n              }, () => {\n                this.props.getFile(this.state.fileArray, this.state.filenames, this.state.imageArray);\n                console.log(\"imageArray\", this.state.imageArray);\n              });\n            }).catch(error => {\n              console.log(error);\n            });\n          } else {\n            swal(\"Image not uploaded\", \"Something went wrong\");\n          }\n        } else {\n          swal(\"Please upload Image\", \"Only Upload Images format (jpg,png,jpeg)\");\n        }\n      }\n    }\n  }\n\n  uploadFiles(event) {\n    event.preventDefault();\n    let self = this;\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var file = event.currentTarget.files[0];\n      var newFileName = JSON.parse(JSON.stringify(new Date())) + \"_\" + file.name;\n      var newFile = new File([file], newFileName);\n      this.setState({\n        newFile: newFile\n      });\n\n      if (newFile) {\n        // console.log(\"config--------------->\",this.state.config);\n        var ext = newFile.name.split('.').pop();\n\n        if (ext === \"DOC\" || ext === \"DOCX\" || ext === \"PDF\" || ext === \"XLS\" || ext === \"XLSX\" || ext === \"PPT\" || ext === \"PPTX\" || ext === \"TXT\" || ext === \"doc\" || ext === \"docx\" || ext === \"pdf\" || ext === \"xls\" || ext === \"xlsx\" || ext === \"ppt\" || ext === \"pptx\" || ext === \"txt\") {\n          if (newFile) {\n            S3FileUpload.uploadFile(newFile, this.state.config).then(Data => {\n              // console.log(\"Data = \",Data);\n              // console.log(\"newFile = \",newFile.name);\n              var fileName = file.name;\n              var obj2 = {\n                fileName: fileName\n              };\n              var obj1 = {\n                filePath: Data.location,\n                fileName: fileName\n              };\n              var filenames = this.state.filenames;\n              var fileArray = this.state.fileArray;\n              filenames.push(obj2);\n              fileArray.push(obj1);\n              this.setState({\n                ext: ext,\n                CheckFile: true,\n                filenames: filenames,\n                fileArray: fileArray\n              }, () => {\n                console.log(\"filenames\", this.state.fileArray);\n                this.props.getFile(this.state.fileArray, this.state.filenames, this.state.imageArray);\n                console.log(\"fileArray\", this.state.fileArray);\n                var fileLocation = JSON.stringify(this.state.fileArray);\n                localStorage.setItem(\"fileLocation\", fileLocation);\n              });\n            }).catch(error => {\n              console.log(\"formErrors\");\n              console.log(error);\n            });\n          } else {\n            swal(\"File not uploaded\", \"Something went wrong\");\n          }\n        } else {\n          swal(\"Please upload file\", \"Only Upload  File format (jpg,png,jpeg)\");\n        }\n      }\n    }\n  }\n\n  deleteFile(e) {\n    e.preventDefault();\n    var index = e.target.getAttribute('id');\n    var filePath = e.target.getAttribute('data-id');\n    console.log(\"this.state.fileArray\", this.state.fileArray, \"index\", index, \"filePath\", filePath);\n    var index = e.currentTarget.getAttribute('id');\n    var filePath = e.currentTarget.getAttribute('data-id');\n    var data = filePath.split(\"/\");\n    var imageName = data[4];\n\n    if (index) {\n      swal({\n        title: \"Are you sure you want to delete this image?\",\n        text: \"Once deleted, you will not be able to recover this image!\",\n\n        /* icon: \"warning\",*/\n        buttons: true,\n        dangerMode: true\n      }).then(willDelete => {\n        if (willDelete) {\n          var fileArray = this.state.fileArray; // make a separate copy of the array\n\n          fileArray.splice(index, 1);\n          swal(\"abc\", \"File deleted successfully\");\n          this.setState({\n            fileArray: fileArray\n          }, () => {});\n        } else {\n          swal(\"Are you sure you want to deletimageArraye this image?\", \"Your image is safe!\");\n        }\n      });\n    }\n  }\n\n  deleteImage(e) {\n    e.preventDefault();\n    var index = e.currentTarget.getAttribute('id');\n    var filePath = e.currentTarget.getAttribute('data-id');\n    console.log(\"filePath===\", filePath);\n    var data = filePath.split(\"/\");\n    var imageName = data[4];\n\n    if (index) {\n      swal({\n        title: \"Are you sure you want to delete this image?\",\n        text: \"Once deleted, you will not be able to recover this image!\",\n\n        /* icon: \"warning\",*/\n        buttons: true,\n        dangerMode: true\n      }).then(willDelete => {\n        if (willDelete) {\n          var imageArray = this.state.imageArray; // make a separate copy of the array\n\n          imageArray.splice(index, 1);\n          swal(\"abc\", \"File deleted successfully\");\n          this.setState({\n            imageArray: imageArray\n          }, () => {});\n        } else {\n          swal(\"Are you sure you want to deletimageArraye this image?\", \"Your image is safe!\");\n        }\n      });\n    }\n  }\n\n  deleteItem(event) {\n    event.preventDefault(); // console.log('innnnn.....');\n\n    var configData = this.props.configData;\n    var id = event.target.getAttribute('data-id');\n\n    if (id) {\n      swal({\n        title: \"Are you sure you want to delete this File?\",\n        text: \"Once deleted, you will not be able to recover this File!\",\n        icon: \"warning\",\n        buttons: true,\n        dangerMode: true\n      }).then(willDelete => {\n        if (willDelete) {\n          axios({\n            method: configData.deleteMethod,\n            url: configData.apiLink + id\n          }).then(response => {\n            if (response.data === 'workspace deleted') {\n              swal(\"Workspace deleted successfully\");\n              this.props.history.push(configData.pageURL);\n              window.location.reload(); // $('#myModal'+this.state.deleteId).css('display','none');                 \n            }\n          }).catch(function (error) {\n            console.log(error);\n\n            if (error.message === \"Request failed with status code 401\") {\n              swal(\"Your session is expired! Please login again.\", \"\", \"error\");\n              this.props.history.push(\"/\");\n            }\n          });\n        } else {\n          swal(\"Your information is safe!\");\n        }\n      });\n    }\n  }\n\n  render() {\n    console.log(\"this.state.fileArray\", this.state.fileArray);\n    return React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 compForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-4 col-sm-12 col-xs-12 row padTopC\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 noPadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"clr_k \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      title: \"Click to attach file\",\n      multiple: true,\n      name: \"userPic\",\n      onChange: this.state.fileType === \"Image\" ? this.uploadImage.bind(this) : this.uploadFiles.bind(this),\n      ref: \"workspaceImg\",\n      className: \"form-control click_input\",\n      id: \"upload-file2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 imgdetails\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, this.state.fileType === \"Image\" ? \"(Max size: 1 Mb, Format: JPEG, PNG)\" : \"(Max size: 1 Mb, Format: DOC, PDF, XLS)\", \" \")), this.state.imageArray === null ? null : this.state.imageArray && this.state.imageArray.length > 0 ? this.state.imageArray.map((data, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, this.state.fileType === \"Image\" ? React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-4 col-sm-12 col-xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"h5Title col-lg-10 col-md-10 col-sm-12 col-xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, \" Image \", index + 1), React.createElement(\"label\", {\n        id: index,\n        className: \"pull-right custFaTimes crossLabel\",\n        title: \"Delete image\",\n        \"data-id\": data.imgPath,\n        onClick: this.deleteImage.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-times\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"imgcss\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"img-responsive imgheight\",\n        src: data.imgPath,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      })))) : \"\");\n    }) : null, this.state.fileArray.length <= 0 ? null : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, this.state.fileType === \"File\" ? React.createElement(\"div\", {\n      className: \"col-lg-9 col-md-9 col-sm-12 col-xs-12 row fileContainer textAlignCenter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, this.state.fileArray && this.state.fileArray.length > 0 ? this.state.fileArray.map((a, index) => {\n      return React.createElement(\"div\", {\n        className: \"col-lg-12\",\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        id: index,\n        className: \"pull-right custFaTimes crossLabel\",\n        title: \"Delete image\",\n        \"data-id\": a.filePath,\n        onClick: this.deleteFile.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-times\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, a.fileName.split('.').pop() === \"XLS\" || a.fileName.split('.').pop() === \"XLSX\" || a.fileName.split('.').pop() === \"xls\" || a.fileName.split('.').pop() === \"xlsx\" ? React.createElement(\"img\", {\n        className: \"fileExt\",\n        height: \"50\",\n        src: \"/images/exel2.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }) : \"\", a.fileName.split('.').pop() === \"PPT\" || a.fileName.split('.').pop() === \"PPTX\" || a.fileName.split('.').pop() === \"ppt\" || a.fileName.split('.').pop() === \"pptx\" ? React.createElement(\"img\", {\n        className: \"fileExt\",\n        src: \"/images/powerpoint.jpeg\",\n        height: \"50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }) : \"\", a.fileName.split('.').pop() === \"pdf\" || a.fileName.split('.').pop() === \"PDF\" ? React.createElement(\"img\", {\n        className: \"fileExt\",\n        src: \"/images/pdf.png\",\n        height: \"50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }) : \"\", a.fileName.split('.').pop() === \"doc\" || a.fileName.split('.').pop() === \"docx\" || a.fileName.split('.').pop() === \"DOC\" || a.fileName.split('.').pop() === \"DOCX\" || a.fileName.split('.').pop() === \"txt\" || a.fileName.split('.').pop() === \"TXT\" ? React.createElement(\"img\", {\n        className: \"fileExt\",\n        src: \"/images/docs.png\",\n        height: \"50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }) : \"\"), React.createElement(\"p\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, a.fileName));\n    }) : null) : null))));\n  }\n\n}\n\nexport default AddFile;","map":{"version":3,"sources":["/home/iassure/Ref Clone/iAssureIT Website/iAssureITReactCMS/webapp/admin/src/CMS/component/JobApplication/AddFile.js"],"names":["React","Component","axios","swal","S3FileUpload","AddFile","constructor","props","state","configData","fileArray","imageArray","fileType","action","componentWillReceiveProps","nextProps","console","log","setState","componentDidMount","get","then","response","config","bucketName","data","bucket","dirName","region","accessKeyId","key","secretAccessKey","secret","catch","error","message","history","push","handleChange","event","preventDefault","uploadImage","self","currentTarget","files","file","newFileName","JSON","parse","stringify","Date","name","newFile","File","ext","split","pop","uploadFile","Data","obj1","imgPath","location","getFile","filenames","uploadFiles","fileName","obj2","filePath","CheckFile","fileLocation","localStorage","setItem","deleteFile","e","index","target","getAttribute","imageName","title","text","buttons","dangerMode","willDelete","splice","deleteImage","deleteItem","id","icon","method","deleteMethod","url","apiLink","pageURL","window","reload","render","bind","length","map","a"],"mappings":"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","sourcesContent":["import React, { Component }   from 'react';\n// import $                      from 'jquery';\nimport axios                  from 'axios';\nimport swal                   from 'sweetalert';\nimport S3FileUpload           from 'react-s3';\n// import { deleteFile }         from 'react-s3';\n// import IAssureTable           from \"../../coreAdmin/IAssureTable/IAssureTable.jsx\";\n\n//import 'react-table/react-table.css';\nimport \"./AddFile.css\";\n\nclass AddFile extends Component{\n\n  constructor(props){\n    super(props);\n    this.state = {\n      \"config\"            :\"\",\n      \"author\"            :\"\",\n      \"caseStudy_Image\"   :\"\",\n      \"CheckFile\"         :false,\n      \"caseStudy_File\"    :\"\", \n      \"configData\"        : props && props.configData  ? props.configData : {},       \n      \"fileArray\"         : props && props.fileArray   ? props.fileArray : [],       \n      \"imageArray\"        : props && props.imageArray  ? props.imageArray : [],       \n      \"fileType\"          : props && props.fileType    ? props.fileType : {},\n      \"action\"            : props && props.action      ? props.action : \"\",\n      \"filenames\"         : [],\n      // fileArray           : [],\n    }\n\n  }\n \n  componentWillReceiveProps(nextProps){\n    console.log('nextProps.imageArray', nextProps); \n    if(nextProps){\n      this.setState({     \n          \"imageArray\"      : nextProps.imageArray,\n          \"fileArray\"       : nextProps.fileArray\n      })\n    }\n  }\n \n  componentDidMount() {\n    var configData =  this.props.configData;\n    var fileType   =  this.props.fileType;\n\n    this.setState({\n      fileType : fileType\n    },()=>{console.log(\"fileType\",this.state.fileType)})\n    axios\n      // .get('http://cofficapi.iassureit.com/api/projectSettings/single/S3')\n      .get('/api/projectSettings/get/S3')\n      .then((response)=>{\n          // console.log(\"response\",response);\n      \n        const config = {\n                          bucketName      : response.data.bucket,\n                          dirName         : \"iOG\",\n                          region          : response.data.region,\n                          accessKeyId     : response.data.key,\n                          secretAccessKey : response.data.secret,\n                       }\n        this.setState({\n          config : config\n        },()=>{\n          // console.log(\"config\",this.state.config)\n        })\n      })\n      .catch(function(error){\n        console.log(error);\n          if(error.message === \"Request failed with status code 401\")\n              {\n                   swal(\"Your session is expired! Please login again.\",\"\", \"error\");\n                   this.props.history.push(\"/\");\n              }\n      })\n  }\n \n  handleChange(event){\n    event.preventDefault();\n  }\n\n  uploadImage(event){\n    event.preventDefault();\n    let self = this;\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var file = event.currentTarget.files[0];\n      var newFileName = JSON.parse(JSON.stringify(new Date()))+\"_\"+file.name;\n      var newFile = new File([file],newFileName);\n      // console.log(\"file\",newFile);\n      if (newFile) {\n      // console.log(\"config--------------->\",this.state.config);\n        var ext = newFile.name.split('.').pop();\n        if(ext===\"jpg\" || ext===\"png\" || ext===\"jpeg\" || ext===\"JPG\" || ext===\"PNG\" || ext===\"JPEG\"){\n          if (newFile) {\n            S3FileUpload\n              .uploadFile(newFile,this.state.config)\n              .then((Data)=>{\n                  var obj1={\n                    imgPath : Data.location,\n                  }\n                  var imageArray = this.state.imageArray;\n                  imageArray.push(obj1);\n                  this.setState({\n                    imageArray : imageArray\n                  },()=>{\n                    this.props.getFile(this.state.fileArray, this.state.filenames,this.state.imageArray)\n                    console.log(\"imageArray\",this.state.imageArray)\n                  })\n              })\n              .catch((error)=>{\n                console.log(error);\n              })\n          }else{        \n            swal(\"Image not uploaded\",\"Something went wrong\");\n          }\n        }else{\n          swal(\"Please upload Image\",\"Only Upload Images format (jpg,png,jpeg)\"); \n        }\n      }\n    }\n  }\nuploadFiles(event){\n   event.preventDefault();\n   let self = this;\n   if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var file        = event.currentTarget.files[0];\n      var newFileName = JSON.parse(JSON.stringify(new Date()))+\"_\"+file.name;\n      var newFile     = new File([file],newFileName);\n      this.setState({\n                    newFile : newFile,\n                  })\n      if (newFile) {\n      // console.log(\"config--------------->\",this.state.config);\n        var ext = newFile.name.split('.').pop();\n\n        if(ext===\"DOC\" || ext===\"DOCX\" || ext===\"PDF\" || ext===\"XLS\" || ext===\"XLSX\"  || ext===\"PPT\" || ext===\"PPTX\" || ext===\"TXT\"||\n          ext===\"doc\" || ext===\"docx\" || ext===\"pdf\" || ext===\"xls\" || ext===\"xlsx\" || ext===\"ppt\" || ext===\"pptx\" || ext===\"txt\"){\n          if (newFile) {\n            S3FileUpload\n              .uploadFile(newFile,this.state.config)\n              .then((Data)=>{\n                // console.log(\"Data = \",Data);\n                // console.log(\"newFile = \",newFile.name);\n                  var fileName = file.name;\n                  var obj2={\n                      fileName : fileName\n                  }\n                  var obj1={\n                    filePath : Data.location,\n                    fileName : fileName\n\n                  }\n                  var filenames =this.state.filenames;\n                  var fileArray = this.state.fileArray;\n                  filenames.push(obj2);\n                  fileArray.push(obj1);\n                  this.setState({\n                    ext       :ext,\n                    CheckFile : true,  \n                    filenames : filenames,\n                    fileArray : fileArray\n                  },()=>{\n                    console.log(\"filenames\",this.state.fileArray);\n                    this.props.getFile(this.state.fileArray, this.state.filenames,this.state.imageArray)\n                    console.log(\"fileArray\",this.state.fileArray)\n                    var fileLocation = JSON.stringify(this.state.fileArray);\n                    localStorage.setItem(\"fileLocation\",fileLocation);\n                  })\n              })\n              .catch((error)=>{\n                console.log(\"formErrors\");\n                console.log(error);\n              })\n          }else{        \n            swal(\"File not uploaded\",\"Something went wrong\");\n          }\n        }else{\n          swal(\"Please upload file\",\"Only Upload  File format (jpg,png,jpeg)\"); \n        }\n      }\n    }\n  }\n\n  deleteFile(e){\n    e.preventDefault();\n    var index        = e.target.getAttribute('id');\n    var filePath     = e.target.getAttribute('data-id');\n    console.log(\"this.state.fileArray\",this.state.fileArray,\"index\",index,\"filePath\",filePath);\n    var index = e.currentTarget.getAttribute('id');\n    var filePath = e.currentTarget.getAttribute('data-id');\n    var data = filePath.split(\"/\");\n    var imageName = data[4];\n    if(index){\n      swal({\n        title: \"Are you sure you want to delete this image?\",\n        text: \"Once deleted, you will not be able to recover this image!\",\n       /* icon: \"warning\",*/\n        buttons: true,\n        dangerMode: true,\n      })\n      .then((willDelete) => {\n        if (willDelete) {\n          var fileArray = this.state.fileArray; // make a separate copy of the array\n          fileArray.splice(index, 1);\n          swal(\"abc\", \"File deleted successfully\");\n          this.setState({\n            fileArray: fileArray\n          },()=>{\n          });\n        }else {\n          swal(\"Are you sure you want to deletimageArraye this image?\",\"Your image is safe!\");\n        }\n      });\n    }\n  }\n\n  deleteImage(e){\n    e.preventDefault();\n    var index = e.currentTarget.getAttribute('id');\n    var filePath = e.currentTarget.getAttribute('data-id');\n   console.log(\"filePath===\",filePath);\n    var data = filePath.split(\"/\");\n    var imageName = data[4];\n    if(index){\n      swal({\n        title: \"Are you sure you want to delete this image?\",\n        text: \"Once deleted, you will not be able to recover this image!\",\n       /* icon: \"warning\",*/\n        buttons: true,\n        dangerMode: true,\n      })\n      .then((willDelete) => {\n        if (willDelete) {\n          var imageArray = this.state.imageArray; // make a separate copy of the array\n          imageArray.splice(index, 1);\n          swal(\"abc\", \"File deleted successfully\");\n          this.setState({\n            imageArray: imageArray\n          },()=>{\n          });\n        }else {\n          swal(\"Are you sure you want to deletimageArraye this image?\",\"Your image is safe!\");\n        }\n      });\n    }\n  }\n\n  deleteItem(event){\n    event.preventDefault();\n    // console.log('innnnn.....');\n    var configData =  this.props.configData;\n    var id = event.target.getAttribute('data-id');\n    if(id){\n      swal({\n        title: \"Are you sure you want to delete this File?\",\n        text: \"Once deleted, you will not be able to recover this File!\",\n        icon: \"warning\",\n        buttons: true,\n        dangerMode: true,\n      })\n      .then((willDelete) => {\n          if (willDelete) {\n            axios({\n                method: configData.deleteMethod,\n                url   : configData.apiLink+id\n            }).then((response)=> {\n                if(response.data==='workspace deleted'){\n                  swal(\"Workspace deleted successfully\");\n                  this.props.history.push(configData.pageURL);\n                  window.location.reload();\n                 \n                  // $('#myModal'+this.state.deleteId).css('display','none');                 \n                }\n              })\n              .catch(function (error) {\n                  console.log(error);\n                    if(error.message === \"Request failed with status code 401\")\n                      {\n                           swal(\"Your session is expired! Please login again.\",\"\", \"error\");\n                           this.props.history.push(\"/\");\n                      }\n              });\n        } else {\n          swal(\"Your information is safe!\");\n        }\n      });\n    }\n  }\n\n  render() {\n    console.log(\"this.state.fileArray\",this.state.fileArray)\n    return (\n      <div className=\"\">\n        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 compForm\">\n            <div className=\"col-lg-12 col-md-4 col-sm-12 col-xs-12 row padTopC\">\n              {/*<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 row\">\n                <h5 className=\"h5Title col-lg-12 col-md-12 col-sm-12 col-xs-12\">Add {this.state.fileType} <span className=\"astrick\">*</span></h5>\n              </div>*/}\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 noPadding\">\n                <div className=\"clr_k \">\n                 {/* <div className=\"col-lg-offset-1 col-lg-2 col-md-12 col-sm-12 col-xs-12 hand_icon\">\n                    <img src=\"/images/Upload-Icon.png\"/>\n                  </div>\n                  <div  className= \"col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center below_text\">\n                   <b className=\"text_k11\"></b>\n                   <span className=\"under_ln\"><h6>Choose  {this.state.fileType}</h6></span>\n                  </div>  */}  \n                  <input  type=\"file\" title=\"Click to attach file\" multiple name=\"userPic\" onChange={this.state.fileType === \"Image\" ? this.uploadImage.bind(this) : this.uploadFiles.bind(this)} ref=\"workspaceImg\"  className=\"form-control click_input\" id=\"upload-file2\" />\n                </div>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 imgdetails\">{this.state.fileType=== \"Image\" ? \"(Max size: 1 Mb, Format: JPEG, PNG)\" : \"(Max size: 1 Mb, Format: DOC, PDF, XLS)\"} </div>\n            </div>\n\n            {\n              this.state.imageArray===null?\n              null\n              :\n              this.state.imageArray && this.state.imageArray.length > 0 ?\n              this.state.imageArray.map((data,index)=>{\n                return(\n                  <div  key={index} >\n                    {\n                      this.state.fileType===\"Image\" ?\n                      <div  className=\"col-lg-12 col-md-4 col-sm-12 col-xs-12\" >\n                        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 row\">\n                          <h5 className=\"h5Title col-lg-10 col-md-10 col-sm-12 col-xs-12\"> Image {index+1}</h5>\n                          <label id={index} className=\"pull-right custFaTimes crossLabel\" title=\"Delete image\" data-id={data.imgPath} onClick={this.deleteImage.bind(this)}><i className=\"fa fa-times\"></i></label>\n                        </div>\n                        <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\n                          <div className=\"imgcss\" >\n                            <img className=\"img-responsive imgheight\" src={data.imgPath}/>\n                          </div>\n                        </div>\n                      </div>\n                    : \"\"\n                    }\n                  </div>\n                )\n              })\n              :\n              null \n            }\n            {\n              this.state.fileArray.length<=0?\n              null         \n              :\n              <div>\n             \n                    <div>\n                      {\n                        this.state.fileType ===\"File\" ?\n                        <div  className=\"col-lg-9 col-md-9 col-sm-12 col-xs-12 row fileContainer textAlignCenter\">\n                       {/* {\n                          this.state.CheckFile ?\n                          <p className=\"fileName\">File Uploaded</p>\n                          :\n                          null\n\n                          }*/}\n                          {\n                            this.state.fileArray && this.state.fileArray.length > 0 ?\n                            this.state.fileArray.map((a, index)=>{\n                              return(\n                                <div className=\"col-lg-12\"  key={index}>\n                                     <label id={index} className=\"pull-right custFaTimes crossLabel\" title=\"Delete image\" data-id={a.filePath} onClick={this.deleteFile.bind(this)}><i className=\"fa fa-times\"></i></label>\n                                <div >\n                                 {\n                                   a.fileName.split('.').pop()===\"XLS\" || a.fileName.split('.').pop() ===\"XLSX\"||a.fileName.split('.').pop() ===\"xls\" || a.fileName.split('.').pop() ===\"xlsx\"\n                                   ?\n                                    <img className=\"fileExt\"     height=\"50\" src=\"/images/exel2.png\"/>\n                                    :\n                                     \"\"\n                                  }\n                                  {\n                                   ( a.fileName.split('.').pop() ===\"PPT\" || a.fileName.split('.').pop() === \"PPTX\" || a.fileName.split('.').pop() === \"ppt\" || a.fileName.split('.').pop() ===\"pptx\") ?\n                                    <img className=\"fileExt\" src=\"/images/powerpoint.jpeg\" height=\"50\"/> :\"\"\n                                  }\n                                  {\n                                \n                                    (a.fileName.split('.').pop() ===\"pdf\" ||a.fileName.split('.').pop() === \"PDF\") ?\n                                    <img className=\"fileExt\" src=\"/images/pdf.png\" height=\"50\"/>\n                                    :\n                                    \"\"\n                                  }\n                                  {\n                                    (a.fileName.split('.').pop() ===\"doc\" || a.fileName.split('.').pop() === \"docx\" || a.fileName.split('.').pop() === \"DOC\" || a.fileName.split('.').pop() ===\"DOCX\"|| a.fileName.split('.').pop() ===\"txt\" || a.fileName.split('.').pop() === \"TXT\") ?\n                                    <img className=\"fileExt\" src=\"/images/docs.png\" height=\"50\"/> : \"\"\n                                  }\n                                \n                                  </div>\n                                  <p  className=\"\">{a.fileName}</p>\n                                </div>\n                              )\n                            })\n                          :\n                            null\n                          }\n                        </div>\n                      :\n                        null\n                      }\n                    </div>\n             \n              </div>\n            }\n        </div>\n      </div>  \n    );\n  }\n}\nexport default AddFile\n"]},"metadata":{},"sourceType":"module"}